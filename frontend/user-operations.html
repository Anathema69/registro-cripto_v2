<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Registrar Operaciones</title>
  <link rel="stylesheet" href="styles/user-operations.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>
<body>
<div class="operations-container">
  <!-- Barra lateral -->
  <aside class="sidebar">
    <h2>Panel de Usuario</h2>
    <nav>
      <ul>
        <li>
          <button onclick="window.location.href='user-panel.html'">
            <img src="icon/panel_new_user.png" alt="Datos complementarios" class="sidebar-icon" />
            Datos complementarios
          </button>
        </li>
        <li>
          <button class="active">
            <img src="icon/panel_download.png" alt="Registrar operaciones" class="sidebar-icon" />
            Registrar operaciones
          </button>
        </li>
        <li>
          <button onclick="window.location.href='user-history-operations.html'">
            <img src="icon/history-icon.png" alt="Historial" class="sidebar-icon" />
            Historial operaciones
          </button>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Contenido principal -->
  <main class="operations-content">
    <!-- Encabezado -->
    <header class="admin-header">
      <h1 id="userName"></h1>
      <button class="btn-logout" id="logoutBtn">Cerrar sesión</button>
    </header>

    <!-- Sección con pasos tipo wizard -->
    <section class="operations-section">
      <h2>Registrar Operaciones</h2>

      <!-- Barra de pasos -->
      <div class="form-steps">
        <div class="form-step" id="stepIndicator1">
          <div class="step-number">1</div>
          <div class="step-title">Orden/Comercio</div>
        </div>
        <div class="form-step" id="stepIndicator2">
          <div class="step-number">2</div>
          <div class="step-title">Titular Exchange</div>
        </div>
        <div class="form-step" id="stepIndicator3">
          <div class="step-number">3</div>
          <div class="step-title">Tercero/Pago</div>
        </div>
        <div class="form-step" id="stepIndicator4">
          <div class="step-number">4</div>
          <div class="step-title">Datos de Pago</div>
        </div>
      </div>

      <!-- Formulario con 4 pasos -->
      <form class="operations-form" id="operationsForm">
        <!-- Paso 1: Datos de la Orden/Comercio -->
        <div class="step-content" id="step1">
          <h3>Datos de la Orden/Comercio</h3>

          <!-- Sub-sección: Datos de la Orden -->
          <div class="sub-section">
            <h4>Datos de la Orden</h4>
            <div class="two-columns">
              <div class="column">
                <div class="input-group">
                  <label for="canal">Canal:</label>
                  <select id="canal" required>
                    <option value="">Seleccione...</option>
                    <option value="P2P">P2P</option>
                    <option value="PAY">PAY</option>
                    <option value="SPOT">SPOT</option>
                  </select>
                </div>

                <div class="input-group">
                  <label for="ordenNum">Orden N°:</label>
                  <input type="number" id="ordenNum" placeholder="Ej. 12345" required />
                </div>
              </div>
              <div class="column">
                <div class="input-group">
                  <label for="tipoActivo">Tipo de Operación:</label>
                  <select id="tipoActivo" required>
                    <option value="">Seleccione...</option>
                    <option value="Compra">Compra</option>
                    <option value="Venta">Venta</option>
                  </select>
                </div>

                <div class="input-group icon-group">
                  <label for="exchange">Exchange:</label>
                  <select id="exchange" class="icon-select" data-default-icon="icon/exchanges/blank.png" required>
                    <option value="" data-icon="icon/exchanges/blank.png">Seleccione...</option>
                    <option value="BINANCE" data-icon="icon/exchanges/binance.png">BINANCE</option>
                    <option value="OKX" data-icon="icon/exchanges/okx.png">OKX</option>
                    <option value="BYBIT" data-icon="icon/exchanges/bybit.png">BYBIT</option>
                    <option value="BITGET" data-icon="icon/exchanges/bitget.png">BITGET</option>
                    <option value="KUCOIN" data-icon="icon/exchanges/kucoin.png">KUCOIN</option>
                    <option value="BINGX" data-icon="icon/exchanges/bingx.png">BINGX</option>
                    <option value="EL DORADO" data-icon="icon/exchanges/eldorado.png">EL DORADO</option>
                    <option value="OTC´S" data-icon="icon/exchanges/otcs.png">OTC´S</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Sub-sección: Datos del Activo y Moneda -->
          <div class="sub-section">
            <h4>Datos del Activo/Moneda</h4>
            <div class="two-columns">
              <div class="column">
                <div class="input-group icon-group">
                  <label for="activo">Activo:</label>
                  <select id="activo" class="icon-select" data-default-icon="icon/actives/blank.png" required>
                    <option value="" data-icon="icon/actives/blank.png">Seleccione...</option>
                    <option value="USDT" data-icon="icon/actives/usdt.png">USDT</option>
                    <option value="USDC" data-icon="icon/actives/usdc.png">USDC</option>
                    <option value="FDUSD" data-icon="icon/actives/fdusd.png">FDUSD</option>
                    <option value="BTC" data-icon="icon/actives/btc.png">BTC</option>
                    <option value="BNB" data-icon="icon/actives/bnb.png">BNB</option>
                    <option value="ETH" data-icon="icon/actives/eth.png">ETH</option>
                    <option value="DOGE" data-icon="icon/actives/doge.png">DOGE</option>
                    <option value="ADA" data-icon="icon/actives/ada.png">ADA</option>
                    <option value="XRP" data-icon="icon/actives/xrp.png">XRP</option>
                    <option value="SOL" data-icon="icon/actives/sol.png">SOL</option>
                  </select>
                </div>

                <div class="input-group icon-group">
                  <label for="moneda">Moneda:</label>
                  <select id="moneda" class="icon-select" data-default-icon="icon/currencies/blank.png" required>
                    <option value="" data-icon="icon/currencies/blank.png">Seleccione...</option>
                    <option value="COP" data-icon="icon/currencies/cop.png">COP</option>
                    <option value="USD" data-icon="icon/currencies/USD.png">USD</option>
                    <option value="PEN" data-icon="icon/currencies/PEN.png">PEN</option>
                    <option value="ARS" data-icon="icon/currencies/ars.png">ARS</option>
                    <option value="CLP" data-icon="icon/currencies/clp.png">CLP</option>
                  </select>
                </div>
              </div>
              <div class="column">
                <div class="input-group">
                  <label for="monto">Monto:</label>
                  <input type="number" step="0.01" id="monto" placeholder="Ej. 1.50" required />
                </div>
                <div class="input-group">
                  <label for="cantidad">Cantidad:</label>
                  <input type="number" id="cantidad" placeholder="Ej. 100" required />
                </div>
                <div class="input-group" id="total-group">
                  <label for="total">Total:</label>
                  <input type="number" step="0.01" id="total" placeholder="Automático" readonly />
                </div>
                <div class="input-group" id="comision-group">
                  <label for="comision">Comisión:</label>
                  <input type="number" step="0.01" id="comision" placeholder="Ej. 0.50" required />
                </div>
              </div>
            </div>
          </div>

          <div class="buttons-group">
            <button type="button" class="btn-primary" id="btnNext1">Siguiente</button>
          </div>
        </div>

        <!-- Paso 2: Datos Titular del Exchange -->
        <div class="step-content" id="step2" style="display: none;">
          <h3>Datos de Titular Exchange</h3>
          <div class="input-group">
            <label for="titularNombre">Nombre Titular:</label>
            <input type="text" id="titularNombre" placeholder="Nombre de quien recibe el dinero" required />
          </div>
          <div class="input-group">
            <label for="titularTipoID">Tipo ID:</label>
            <select id="titularTipoID" required>
              <option value="">Seleccione...</option>
              <option value="CC">CC</option>
              <option value="CE">CE</option>
              <option value="NIT">NIT</option>
              <option value="PS">Pasaporte</option>
              <option value="NIE">NIE</option>
              <option value="PPT">PPT</option>
            </select>
          </div>
          <div class="input-group">
            <label for="titularDocumento">Documento:</label>
            <input type="text" id="titularDocumento" placeholder="Número del ID" required />
          </div>
          <div class="input-group">
            <label for="titularDireccion">Dirección:</label>
            <input type="text" id="titularDireccion" placeholder="Dirección del titular" required />
          </div>
          <div class="buttons-group">
            <button type="button" class="btn-secondary" id="btnPrev2">Anterior</button>
            <button type="button" class="btn-primary" id="btnNext2">Siguiente</button>
          </div>
        </div>

        <!-- Paso 3: Datos del Tercero/Pago -->
        <div class="step-content" id="step3" style="display: none;">
          <h3>Datos del Tercero/Pago</h3>
          <div class="input-group">
            <label for="terceroNombre">Nombre:</label>
            <input type="text" id="terceroNombre" placeholder="Nombre del tercero" required />
          </div>
          <div class="input-group">
            <label for="terceroTipoID">Tipo ID:</label>
            <select id="terceroTipoID" required>
              <option value="">Seleccione...</option>
              <option value="CC">CC</option>
              <option value="CE">CE</option>
              <option value="NIT">NIT</option>
              <option value="PS">Pasaporte</option>
              <option value="NIE">NIE</option>
              <option value="PPT">PPT</option>
            </select>
          </div>
          <div class="input-group">
            <label for="terceroDocumento">Documento:</label>
            <input type="text" id="terceroDocumento" placeholder="Número del documento" required />
          </div>
          <div class="buttons-group">
            <button type="button" class="btn-secondary" id="btnPrev3">Anterior</button>
            <button type="button" class="btn-primary" id="btnNext3">Siguiente</button>
          </div>
        </div>

        <!-- Paso 4: Datos de Pago -->
        <div class="step-content" id="step4" style="display: none;">
          <h3>Datos de Pago</h3>
          <div class="input-group">
              <label for="cuentaOrigen">Cuenta Origen:</label>
              <input type="text" id="cuentaOrigen" placeholder="La cuenta del usuario" readonly />
          </div>
          <div class="input-group">
              <label for="cuentaDestino">Cuenta Destino:</label>
              <input type="number" id="cuentaDestino" placeholder="Número de cuenta destino" required />
          </div>
          <div class="input-group">
              <label for="referenciaPago">Referencia:</label>
              <input type="text" id="referenciaPago" placeholder="Referencia del pago" required />
          </div>
          <div class="input-group">
              <label for="estadoPago">Estado:</label>
              <input type="text" id="estadoPago" placeholder="Estado del pago" required />
          </div>
          <div class="input-group">
              <label for="fechaPago">Fecha:</label>
              <div class="date-separate">
                  <input type="text" id="fechaPagoDia" placeholder="DD" class="date-input" maxlength="2">
                  <div class="custom-month-select">
                      <button type="button" class="custom-month-trigger">
                          <span id="selectedFechaPagoMes">Mes</span>
                      </button>
                      <div class="custom-month-dropdown">
                          <button type="button" data-value="1">Enero</button>
                          <button type="button" data-value="2">Febrero</button>
                          <button type="button" data-value="3">Marzo</button>
                          <button type="button" data-value="4">Abril</button>
                          <button type="button" data-value="5">Mayo</button>
                          <button type="button" data-value="6">Junio</button>
                          <button type="button" data-value="7">Julio</button>
                          <button type="button" data-value="8">Agosto</button>
                          <button type="button" data-value="9">Septiembre</button>
                          <button type="button" data-value="10">Octubre</button>
                          <button type="button" data-value="11">Noviembre</button>
                          <button type="button" data-value="12">Diciembre</button>
                      </div>
                  </div>
                  <input type="text" id="fechaPagoAnio" placeholder="AAAA" class="date-input" maxlength="4">
                  <input type="hidden" id="fechaPagoMesHidden">
              </div>
          </div>
      
          <div class="input-group">
              <label for="receiptImage">Constancia de Pago (opcional):</label>
              <input type="file" id="receiptImage" accept="image/*" />
          </div>
      </div>

          <div class="buttons-group">
            <button type="button" class="btn-secondary" id="btnPrev4">Anterior</button>
            <button type="submit" class="btn-primary" id="btnRegistrar">Registrar Operación</button>
          </div>
        </div>
      </form>
    </section>
  </main>
</div>

<!-- Overlay y spinner -->
<div id="loadingOverlay" class="loading-overlay" style="display: none;">
  <div class="spinner"></div>
  <p>Registrando operación...</p>
</div>

<!-- Overlay de éxito -->
<div id="successOverlay" class="success-overlay" style="display: none;">
  <div class="success-content">
    <img src="icon/check.png" alt="Success Check" class="success-icon" />
    <h2>¡Operación registrada con éxito!</h2>
  </div>
</div>

<!-- Toast de notificación -->
<div id="toast" class="toast" style="display: none;"></div>

<!-- Script principal -->
<script src="js/user-operations.js"></script>
</body>
</html>